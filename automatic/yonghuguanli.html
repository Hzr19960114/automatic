<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/style2.css"/>
		<link rel="stylesheet" type="text/css" href="css/layui.css"/>
	</head>
	<style type="text/css">
		.row-zhan{
			float: left;
		}
		.main-right{
			width: 15%;
			height: 300px;
			margin-right: 10px;
		}
		.main{
			float: left;
		}
		.main-left{
			width:82%;
		}
		.main-right-s{
			height: 220%;
		}
	</style>
	<body class="gray-bg">
		<div>
			<div class="container-fluid">
			    <div class="row col-xs-12" style="padding:0px;">
					<!--树菜单-->
					<div class="main main-right col-xs-4">
						<div class="col-sm-4 search-collapse main-right-s">
                        	<span  style="font-size: 16px;padding-right: 70px;">
                        		组织机构
                        	</span>
                        	<span>
                        		<i class="fa fa-edit glyphicon glyphicon-edit"></i>
                        	</span>
                        	<span>
                        		<i class="fa fa-edit glyphicon glyphicon glyphicon-chevron-down"></i>
                        	</span>
                        	<span>
                        		<i class="fa fa-edit glyphicon glyphicon glyphicon-refresh"></i>
                        	</span>
							<div id="test1">
								
							</div>
						</div>
					</div>
					<div class="main main-left col-xs-8">
				        <div class="col-sm-8 search-collapse ">
				            <form id="formId">
				                <div class="select-list">
				                    <input id="treeId" name="moduleId" type="hidden" value=""/>
				                    <ul class="list-inline">
				                    	<li>
											登录名称：
				                            <input type="text"  id="login_name"  value=""/>
				                        </li>
				                        <li>
											手机号码：
				                            <input type="text"  id="phonenumber"  value=""/>
				                        </li>
				                        <li>
				                           	用户状态：
				                            <select id="status" name="status" >
				                                <option value="">所有</option>
				                                <option value="0">正常</option>
				                                <option value="1">停用</option>
				                            </select>
				                        </li>
				                        <!--<li class="select-time">
											<label>创建时间： </label>
											<div class="layui-input-inline">
										        <input type="text" class="layui-input" id="createtimenum1" placeholder="yyyy年MM月dd日">
											<span>-</span>
										    </div>
											<div class="layui-input-inline">
										        <input type="text" class="layui-input" id="createtimenum2" placeholder="yyyy年MM月dd日">
										    </div>
										</li>-->
				                        <li class="select-time">
											<label>创建时间： </label>
											<div class="layui-input-inline">
										        <input type="text" class="layui-input" id="test11" placeholder="yyyy年MM月dd日">
											<span>-</span>
										    </div>
											<div class="layui-input-inline">
										        <input type="text" class="layui-input" id="test12" placeholder="yyyy年MM月dd日">
										    </div>
										</li>
				                        <li>
				                            <a class="btn btn-primary btn-rounded btn-sm " id="find" data-type="reload">
				                            	<i class="fa fa-search glyphicon glyphicon-search"></i>&nbsp;搜索</a>
				                            <a class="btn btn-warning btn-rounded btn-sm" onclick="resetForm()">
				                            	<i class="fa fa-refresh glyphicon glyphicon-refresh" ></i>&nbsp;重置</a>
				                        </li>
				                    </ul>
				                </div>
				            </form>
				        </div>
				        
				        <div class="col-sm-12 select-table table-striped">
				        	<div class="btn-group-sm hidden-xs" id="toolbar" role="group"  style="margin-top: 14px;">
				                <a class="btn btn-primary add" data-method="offset" data-type="auto">
				                    <i class="fa fa-plus glyphicon glyphicon-plus"></i> 新增
				                </a>
				                <a class="btn btn-primary btn-edit disabled" id="xg" >
				                    <i class="fa fa-edit glyphicon glyphicon-edit"></i> 修改
				                </a>
				                <a class="btn btn-danger btn-del btn-del disabled" id="sc" >
				                    <i class="fa fa-remove glyphicon glyphicon-remove"></i> 删除
				                </a>
				                <!--<a class="btn btn-info btn-del " onclick="$.operate.removeAll()">
				                    <i class="fa fa-remove glyphicon glyphicon glyphicon  glyphicon-upload"></i> 导入
				                </a>-->
				                <a class="btn btn-warning btn-del " onclick="$.operate.removeAll()"  id="dc">
				                    <i class="fa fa-remove glyphicon glyphicon glyphicon-download"></i> 导出
				                </a>
								<div class="columns columns-right btn-group pull-right">
					        		<button class="btn btn-default btn-outline" type="button" name="showSearch" title="搜索">
					        			<i class="glyphicon glyphicon-search"></i>
					        		</button>
					        		<button class="btn btn-default btn-outline" type="button" name="refresh" title="刷新">
					        			<i class="glyphicon glyphicon-refresh icon-refresh"></i>
					        		</button>
					        		<button class="btn btn-default btn-outline" type="button" name="toggle" title="切换">
					        			<i class="glyphicon glyphicon-list-alt icon-list-alt"></i>
					        		</button>
				        		</div>
				        	</div>
				        	<!--<div class="layui-btn-group demoTable">
							  <button class="layui-btn" data-type="getCheckData">获取选中行数据</button>
							  <button class="layui-btn" data-type="getCheckLength">获取选中数目</button>
							  <button class="layui-btn" data-type="isAll">验证是否全选</button>
							</div>-->
					        <table class="layui-hide" id="test" lay-filter="demo" >
		        	
		        			</table>
		        			<!--新增框-->
		        			<div class="layui-row" id="popCreateTest" style="display: none;">
					    		<div class="layui-col-md10">
					    			<form class="form-horizontal m layui-form"  novalidate="novalidate" lay-filter="example1">
									<input name="deptId" type="hidden" id="treeId">
									<div class="form-group">
										<label class="col-sm-3 control-label ">登录名称：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="loginName" name="loginName">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">部门名称：</label>
										<div class="col-sm-8">
											<select name="listClass" class="form-control m-b "  id="deptlist" name="deptId" lay-verify="required"  class="select">
											    <option value="">---请选择---</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">用户名称：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" name="userName" id="userName">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">密码：</label>
										<div class="col-sm-8">
											<input class="form-control" type="password" name="password" id="password" value="123456">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">邮箱：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" name="email" id="email">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">手机：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" name="phonenumber" id="phonenumber">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">性别：</label>
										<div class="col-sm-8">
											<select name="sex" class="form-control m-b ">
											    <option value="">---请选择---</option>
							                    <option value="0">男</option>
							                    <option value="1">女</option>
							                    <option value="2">未知</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">状态：</label>
										<div class="col-sm-8">
											 <input type="radio" name="status" value="0" title="正常" checked="">
	      									 <input type="radio" name="status" value="1" title="停用">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">岗位：</label>
										<div class="col-sm-8">
											<select id="postlist" name="listClass" class="form-control m-b ">
											    <option value="">---请选择---</option>
							                    <option value="default">项目经理</option>
							                    <option value="primary">开发工程师</option>
							                    <option value="success">测试经理</option>
							                    <option value="info">   测试工程师</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">默认项目：</label>
										<div class="col-sm-8">
											<select name="listClass" class="form-control m-b ">
											    <option value="">---请选择---</option>
							                    <option value="default">所有项目</option>
							                    <option value="primary">流程测试项目</option>
							                    <option value="success">测试项目一</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">角色：</label>
										<div class="col-sm-8">
											 <input type="radio" name="isDefault" value="Y" title="管理员" checked="">
	      									<input type="radio" name="isDefault" value="N" title="普通角色">
										</div>
									</div>
									<div class="layui-form-item">
								    <div class="layui-input-block" style="text-align: center;">
								    	 <button class="layui-btn" lay-submit lay-filter="formDemo2" >新增</button>
								      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
								    </div>
								  	</div>
								</form>
		        				</div>
		        			</div>
		        			<!--
                            	作者：labixiaoxin6515@qq.com
                            	时间：2020-07-24
                            	描述：修改框
                           -->
		        			<div class="layui-row" id="popUpdateTest" style="display:none;">
					    		<div class="layui-col-md10">
					    			<form class="form-horizontal m layui-form" id="form-dict-add" novalidate="novalidate" lay-filter="example">
									<input name="deptId" type="hidden" id="treeId">
									<div class="form-group">
										<label class="col-sm-3 control-label ">登录名称：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="userId" name="userId" style="display: none;">
											<input class="form-control" type="text" id="loginName" name="loginName">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">部门名称：</label>
										<div class="col-sm-8">
											<select name="listClass" class="form-control m-b "  id="deptlist2" name="deptId" lay-verify="required"  class="select">
											    <option value="">---请选择---</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">用户名称：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" name="userName" id="userName">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">密码：</label>
										<div class="col-sm-8">
											<input class="form-control" type="password" name="password" id="password" value="123456">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">邮箱：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" name="email" id="email">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">手机：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" name="phonenumber" id="phonenumber">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">性别：</label>
										<div class="col-sm-8">
											<select name="sex" class="form-control m-b ">
											    <option value="">---请选择---</option>
							                    <option value="0">男</option>
							                    <option value="1">女</option>
							                    <option value="2">未知</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">状态：</label>
										<div class="col-sm-8">
											 <input type="radio" name="status" value="0" title="正常" checked="">
	      									<input type="radio" name="status" value="1" title="停用">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">岗位：</label>
										<div class="col-sm-8">
											<select id="postlist2" name="listClass" class="form-control m-b ">
											    <option value="">---请选择---</option>
							                    <option value="default">项目经理</option>
							                    <option value="primary">开发工程师</option>
							                    <option value="success">测试经理</option>
							                    <option value="info">测试工程师</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">默认项目：</label>
										<div class="col-sm-8">
											<select name="listClass" class="form-control m-b ">
											    <option value="">---请选择---</option>
							                    <option value="default">所有项目</option>
							                    <option value="primary">流程测试项目</option>
							                    <option value="success">测试项目一</option>
							               </select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">角色：</label>
										<div class="col-sm-8">
											 <input type="radio" name="isDefault" value="Y" title="管理员" checked="">
	      									<input type="radio" name="isDefault" value="N" title="普通角色">
										</div>
									</div>
									<div class="layui-form-item">
								    <div class="layui-input-block" style="text-align: center;">
								    	 <button class="layui-btn" lay-submit lay-filter="update" >修改</button>
								      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
								    </div>
								  	</div>
								</form>
		        				</div>
		        			</div>
				        </div>
			        </div>
			    </div>
			</div>
		</div>
	<script type="text/html" id="switchTpl">
	  <!-- 这里的 checked 的状态只是演示 -->
	  <input type="checkbox" name="sex" value="{{d.id}}" lay-skin="switch" lay-text="女|男" lay-filter="sexDemo" {{ d.id == 10003 ? 'checked' : '' }}>
	</script>
	<script type="text/html" id="barDemo">
	  <a class="btn btn-primary btn-xs" lay-event="edit"><i class="glyphicon glyphicon-edit"></i>编辑</a>
	  <a class="btn btn-danger btn-xs" lay-event="remove"> <i class="glyphicon glyphicon-remove"></i>删除</a>
	</script>
	<script src="js/jquery-1.12.4.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/vue.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/layui.js" type="text/javascript" charset="utf-8"></script>	
	<script>
		/*树形*/
		/*layui.tree({
		  elem: '#demo'
		  ,nodes: [{ //节点数据
		    name: '节点A'
		    ,children: [{
		      name: '节点A1'
		    }]
		  }, {
		    name: '节点B'
		    ,children: [{
		      name: '节点B1'
		      ,alias: 'bb' //可选
		      ,id: '123' //可选
		    }, {
		      name: '节点B2'
		    }]
		  }] 
		  ,click: function(node){
		    console.log(node) /de即为当前点击的节点数据
		  }  
		});*/
		layui.use('tree', function(){
		    var tree = layui.tree;
		    //渲染
		    var nodes="";
		   $.ajax({
			  url:"http://localhost:8888/SysDeptController/findAll",
			  type:"GET",
			  datatype:"json",
			  async:false,
			  success:function(result){
			  	nodes=result;
			 }
		   });
		    tree.render({//tree.render() 方法指定一个元素，便可快速创建一个 tree 实例
			  elem: '#test1', //传入元素选择器
			  data:nodes,//获取节点数据
			  id: 'deptId',//定义索引 
			  text:{
			  	defaultNodeName:"未命名"
			  },
			  title:"deptName"
		   });
		  });
		/*日期框*/
		layui.use('laydate', function(){
			var laydate = layui.laydate;
			laydate.render({
			    elem: '#test11'
			    ,format: 'yyyy年MM月dd日'
			});
			laydate.render({
			    elem: '#test12'
			    ,format: 'yyyy年MM月dd日'
			});
		});
		
		/*从这里开始*/
		function resetForm() {
            $('#dictLabel').val("");
			    $("#dictType").val(sessionStorage.getItem("dictType"));
			    $("#status").val("全部");
        }
		
		
		layui.use(['form', 'layedit', 'laydate'], function(){
			  var form = layui.form
			  ,layer = layui.layer
			  ,layedit = layui.layedit
			  ,laydate = layui.laydate;
			  
			form.on('submit(formDemo2)', function(data){
				$.ajax({
					type:"post",
					url:"http://localhost:8888/SysUserController/create",
					data:data.field,
					success:function(res){
						console.log(res);
						layer.confirm("新增成功!",function(){
							location.href=location.href;
						});
						
					}
				});
				return false;
			});
			
			form.on('submit(update)', function(data){
				$.ajax({
					type:"post",
					url:"http://localhost:8888/SysUserController/update",
					data:data.field,
					success:function(res){
						layer.confirm("修改成功!",function(){
							location.href=location.href;
						});
					}
				});
					return false;
			});
		});  
		 

		layui.use(['table','form'], function(){
			var form = layui.form;
		  	var table = layui.table;
		  	var tableIns =table.render({
		    elem: '#test'
		    ,url:"http://localhost:8888/SysUserController/findByPage"
		    ,method:"get"
		    ,toolbar:true
		    /*,where:{"dictType":sessionStorage.getItem("dictType")}*/
		    ,cols: [[
		      {type:'checkbox'}
		      ,{field:'userId', title: '用户ID'}
		      ,{field:'loginName', title: '登录名称', sort: true}
		      ,{field:'userName', title: '用户昵称'}
		      ,{field:'deptName', title: '部门'}
		      ,{field:'phonenumber', title: '手机'}
		      ,{field:'status', title: '用户状态'}
		      ,{field:'sign', title: '操作', toolbar: '#barDemo'}
		    ]]
		    /*,page: { //分页设定
                layout: ['count', 'prev', 'page', 'next'] //自定义分页布局
                , curr: 1 //设定初始在第 1 页
                , limit: 10//每页多少数据
                , groups: 5 //只显示 5 个连续页码
            } */
            ,parseData:function(res){
            	/*sessionStorage.setItem("dictType",res.list[0].dictType);*/
		    	for(var i=0;i<res.list.length;i++){
		    		if(res.list[i].status=="0"){
		    			res.list[i].status="正常";
		    		}else{
		    			res.list[i].status="停用";
		    		}
		    	}
		    	return{
		    		"code":0,
		    		"msg":"",
		    		"count":res.total,/*total*/
		    		data:res.list
		    	}
		    }
		    ,page: true
		    ,id: 'testReload'
		  });
			 var $ = layui.$, active = {
		    	reload: function(){
				    var login_name = $('#login_name').val();
				    var phonenumber=$("#phonenumber").val();
				    var status=$("#status").val();
				    var createtimenum1=$("#test11").val();
				    var createtimenum2=$("#test12").val();
			      //执行重载
			      table.reload('testReload', {
			        page: {
			          curr: 1 //重新从第 1 页开始
			        }
			        ,where: {
			        	login_name:login_name,
			        	phonenumber:phonenumber,
			        	status:status,
			        	createtimenum1:createtimenum1,
			        	createtimenum2:createtimenum2
			        }
			      });

		    }
		  };
			layui.use('laydate', function(){
			
				var laydate = layui.laydate;
				laydate.render({
				    elem: '#test11'
				   ,type: 'datetime'
				});
				laydate.render({
				    elem: '#test12'
				   ,type: 'datetime'
				});
			});
  			$('#find').on('click', function(){
			    var type = $(this).data('type');
			    active[type] ? active[type].call(this) : '';
		  });
		  
		  var shuju={};
		   table.on('checkbox(demo)', function(obj){
		   	 var checkStatus = table.checkStatus('testReload')
      		,data = checkStatus.data;
		   	if(data.length==0){
		   		$("#xg").addClass("disabled");
		   		$("#sc").addClass("disabled");
		  	}else if(data.length==1){
		  		$("#xg").removeClass("disabled");
		  		shuju=data[0];
		  		
		    		if(shuju.status=="正常"){
		    			shuju.status="0";
		    		}else{
		    			shuju.status="1";
		    		}
		    	
		  		$("#sc").removeClass("disabled");
		  	}else{
		  		$("#sc").removeClass("disabled");
		  		$("#xg").addClass("disabled");	
		  	}
	  
  			});
  			
  			$('.add').on('click', function(){
			    layer.open({
	      				title:['添加数据','color:#333333;background-color:#f8f8f8;'], 
						type: 1
						,area: ['800px', '716px']
				        ,shade: 0
				        ,maxmin: true
				        ,offset: "auto" //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
				        ,id: 'layerDemo1'+"auto" //防止重复弹出
//				        ,btn: ['确定','关闭']
//				        ,btnAlign: 'r' 
				        ,content:$("#popCreateTest").html()
				        ,shade: 0 //不显示遮罩
	      			});
	      			 form.val('example1',{
	      			 	"dictType":sessionStorage.getItem("dictType")
	      			 });
			});
  			
  			$("#xg").on('click', function(){
  				layer.open({
	      				title:['修改类型','color:#333333;background-color:#f8f8f8;'], 
						type: 1
						,area: ['800px', '716px']
				        ,shade: 0
				        ,maxmin: true
				        ,offset: "auto" //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
				        ,id: 'layerDemo'+"auto" //防止重复弹出
				        ,content:$("#popUpdateTest").html()
//				        ,btn: ['确定','关闭']
//				        ,btnAlign: 'r' //按钮居中
				        ,shade: 0 //不显示遮罩
				        ,yes: function(){
				        	
				    
				        }
	      		});
	      		form.val('example',shuju);
	      			
		   });
		   
		   $("#sc").on('click', function(){
		   		var checkStatus = table.checkStatus('testReload')
      			,data = checkStatus.data;
      			var str=JSON.stringify(data);
      			layer.confirm('确定要删除选中的'+data.length+'条数据吗？', function(index){
      				 layer.close(index);
      				 $.ajax({
      				 	url:"http://localhost:8888/SysUserController/removeList",
				      	method:"post",
						data:str,
						contentType:"application/json;charset=utf-8",
				      	success:function(res){
				      		 tableIns.reload();
				      		 layer.alert("删除成功");
				      	}
      				 });
      			 });
      			
		   	});
		   	
		   	$("#dc").on('click',function(){
		   		 	var login_name = $('#login_name').val();
				    var phonenumber=$("#phonenumber").val();
				    var status=$("#status").val();
				    var createtimenum1=$("#createtimenum1").val();
				    var createtimenum2=$("#createtimenum2").val();
				    
		   		var url="?login_name="+login_name+"&phonenumber="+phonenumber+"&status="+status+"&createtimenum1="+createtimenum1+"&createtimenum2="+createtimenum2;
		   		location.href="http://localhost:8888/SysUserController/exportExcel"+url;
		   	});
		  	
		  
		  table.on('tool(demo)', function(obj){
		    var data = obj.data;
		   		 if(data.status=="正常"){
		    			data.status="0";
		    		}else{
		    			data.status="1";
		    		}
		    if(obj.event === 'edit'){
		      layer.open({
	      				title:['修改数据','color:#333333;background-color:#f8f8f8;'], 
						type: 1
						,area: ['800px', '716px']
				        ,shade: 0
				        ,maxmin: true
				        ,offset: "auto" //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
				        ,id: 'layerDemo'+"auto" //防止重复弹出
				        ,content:$("#popUpdateTest").html()
//				        ,btn: ['确定','关闭']
//				        ,btnAlign: 'r' //按钮居中
				        ,shade: 0 //不显示遮罩
				        ,yes: function(){
				          layer.closeAll();
				        }
	      			});
	      			 form.val('example',data);
		    } else if(obj.event === 'remove'){
		      layer.confirm('真的删除行么', function(index){
		        obj.del();
		        layer.close(index);
		        $.ajax({
                      url:"http://localhost:8888/SysUserController/delete/"+data.userId,
                      data:{},
                      type:"delete",
                      dataType:"json",
                      success:function(data){
                        console.log(data);
                          layer.msg(data.msg);
				          layer.alert("删除成功");
                      },
                      error:function(data){
                          $.messager.alert('错误',data.msg);
                      }
                  });
		      
		      });
		      
		    }
		  });
		});
  		
  		//部门下拉列表赋值
  		//岗位下拉渲染
  		//重新渲染表单函数postlist
		layui.use('form',function(){
		  var $ = layui.jquery
		  var form = layui.form
			    $.ajax({
			        url: 'http://localhost:8888/SysDeptController/findselect',
			        dataType: 'json',
			        type: 'get',
			        success: function(data) {
			            if (data!== null) {
			            	$("#deptlist").empty();
		                	$("#deptlist").append(new Option("请选择", "0"));
			                $.each(data, function(index, item) {                   
			                    $('#deptlist').append(new Option(item.deptName,item.deptId));
			                });
			                
			                $("#deptlist2").empty();
		                	$("#deptlist2").append(new Option("请选择部门", "0"));
			                $.each(data, function(index, item) {                   
			                    $('#deptlist2').append(new Option(item.deptName,item.deptId));
			                });
			            } else {
			                $("#deptlist").append(new Option("暂无数据", ""));
			                $("#deptlist2").append(new Option("暂无数据", ""));
			            }
			            //重新渲染
			            form.render("select");
			        }
			    });
			    $.ajax({
			        url: 'http://localhost:8888/SysPostController/findAll',
			        dataType: 'json',
			        type: 'get',
			        success: function(data) {
			            if (data!== null) {
			            	$("#postlist").empty();
		                	$("#postlist").append(new Option("请选择岗位", "0"));
			                $.each(data, function(index, item) {                   
			                    $('#postlist').append(new Option(item.postName,item.postId));
			                });
			                
			                $("#postlist2").empty();
		                	$("#postlist2").append(new Option("请选择岗位", "0"));
			                $.each(data, function(index, item) {                   
			                    $('#postlist2').append(new Option(item.postName,item.postId));
			                });
			            } else {
			                $("#postlist").append(new Option("暂无数据", ""));
			                $("#postlist2").append(new Option("暂无数据", ""));
			            }
			            //重新渲染
			            form.render("select");
			        }
			    });
		});
  		//
  		$(function(){
  			$("[name=showSearch]").click(function(){
  				$(".search-collapse").slideToggle();
  			});
  			$("[name=refresh]").click(function(){
  				location.reload();
  			});
  		});
	</script>
	</body>
</html>
